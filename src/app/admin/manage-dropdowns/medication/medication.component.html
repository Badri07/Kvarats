<div class="space-y-6">
  <!-- Header -->
  <div class="flex justify-between items-center">
    <div>
      <!-- <h2 class="text-2xl font-semibold text-gray-900">Medications</h2> -->
      <p class="text-gray-600 mt-1">Manage the list of available medications in your system.</p>
    </div>
    <button
      (click)="showAddForm()"
      class="customBtn-secondary flex items-center"
    >
      <!-- <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
      </svg> -->
      Add Medication
    </button>
  </div>

  <!-- Form -->
  <div *ngIf="showForm" class="card p-6">
    <h3 class="text-lg font-medium text-gray-900 mb-4">
      {{ isEditing ? 'Edit Medication' : 'Add New Medication' }}
    </h3>
    
    <form [formGroup]="medicationForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Medication Name</label>
          <input
            type="text"
            formControlName="name"
            class="form-control"
            placeholder="Enter medication name"
          >
          <div *ngIf="medicationForm.get('name')?.invalid && medicationForm.get('name')?.touched" class="text-red-500 text-sm mt-1">
            Medication name is required and must be less than 255 characters.
          </div>
        </div>
  <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Generic Name</label>
          <input
            type="text"
            formControlName="genericname"
            class="form-control"
            placeholder="Enter medication name"
          >
          <div *ngIf="medicationForm.get('genericname')?.invalid && medicationForm.get('genericname')?.touched" class="text-red-500 text-sm mt-1">
            generic name  is required
          </div>
        </div>
          <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">DrugClass</label>
          <input
            type="text"
            formControlName="drugClass"
            class="form-control"
            placeholder="Enter DrugClass"
          >
          <div *ngIf="medicationForm.get('drugClass')?.invalid && medicationForm.get('drugClass')?.touched" class="text-red-500 text-sm mt-1">
            DrugClass is required
          </div>
        </div>
        <div class="flex items-center">
          <label class="flex items-center">
            <input
              type="checkbox"
              formControlName="active"
              class="rounded border-gray-300 text-primary-600 focus:ring-primary-500"
            >
            <span class="ml-2 text-sm text-gray-700">Active</span>
          </label>
        </div>
      </div>

      <div class="flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200">
        <button
          type="button"
          (click)="cancelForm()"
          class="btn-secondary"
        >
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="medicationForm.invalid"
          class="customBtn-secondary disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ isEditing ? 'Update' : 'Create' }} Medication
        </button>
      </div>
    </form>
  </div>

 <div *ngIf="isshowTable">
 <ag-grid-angular
  class="ag-theme-alpine ag-theme-custom"
  [gridOptions]="gridOptions"
  [rowData]="rowData"
  [columnDefs]="columnDefs"
  [defaultColDef]="defaultColDef"
  [paginationPageSize]="paginationPageSize"
  (cellClicked)="onCellClicked($event)"
  style="width: 100%; height: 500px;">
</ag-grid-angular>

<!-- Table Wrapper -->
<div class="bg-white rounded-b-xl border-t-0 border border-gray-200 shadow-sm">
  <div class="flex flex-col md:flex-row justify-between items-center gap-4 px-4 py-3 border-t border-gray-200 text-sm text-gray-700">
    
    <div class="flex flex-col md:flex-row items-center gap-4">
      <div class="flex items-center gap-2">
        <label for="pageSize" class="font-medium">Page Size:</label>
        <select id="pageSize"
                [(ngModel)]="paginationPageSize"
                (change)="onPageSizeChange()"
                class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-orange-500">
          <option *ngFor="let size of paginationPageSizeSelector" [value]="size">{{ size }}</option>
        </select>
      </div>

      <!-- Page Info -->
      <div>
        Showing <span class="font-semibold">{{ pageStart }}</span> to
        <span class="font-semibold">{{ pageEnd }}</span> of
        <span class="font-semibold">{{ totalCount }}</span> records
      </div>
    </div>

    <!-- Right: Pagination Controls -->
    <div class="flex items-center gap-2 ml-auto">
      <button (click)="goToPreviousPage()"
              [disabled]="currentPage === 1"
              class="px-4 py-1.5 rounded bg-orange-500 text-white disabled:bg-gray-300 disabled:cursor-not-allowed">
        Previous
      </button>

      <span>
        Page <span class="font-semibold">{{ currentPage }}</span> of
        <span class="font-semibold">{{ totalPages }}</span>
      </span>

      <button (click)="goToNextPage()"
              [disabled]="currentPage === totalPages"
              class="px-4 py-1.5 rounded bg-orange-500 text-white disabled:bg-gray-300 disabled:cursor-not-allowed">
        Next
      </button>
    </div>

  </div>
</div>
   </div> 
    <!-- <div class="table-container">
      <table class="table">
        <thead class="table-header">
          <tr>
            <th>ID</th>
            <th>Medication Name</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody class="table-body">
          <tr *ngFor="let medication of medications">
            <td class="font-medium">{{ medication.id }}</td>
            <td>{{ medication.name }}</td>
            <td>
              <span
                [class]="medication.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
                class="inline-flex px-2 py-1 text-xs font-semibold rounded-full"
              >
                {{ medication.active ? 'Active' : 'Inactive' }}
              </span>
            </td>
            <td>
              <div class="flex space-x-2">
                <button
                  (click)="editMedication(medication)"
                  class="text-primary-600 hover:text-primary-900 text-sm font-medium"
                >
                  Edit
                </button>
                <button
                  (click)="confirmDelete(medication.id!)"
                  class="text-red-600 hover:text-red-900 text-sm font-medium"
                >
                  Delete
                </button>
              </div>
            </td>
          </tr>
          <tr *ngIf="medications.length === 0">
            <td colspan="4" class="text-center py-8 text-gray-500">
              No medications found. Add your first medication to get started.
            </td>
          </tr>
        </tbody>
      </table>
    </div> -->
 

<!-- Delete Confirmation Dialog -->
<app-confirm-dialog
  *ngIf="showDeleteConfirm"
  title="Delete Medication"
  message="Are you sure you want to delete this medication? This action cannot be undone."
  confirmText="Delete"
  cancelText="Cancel"
  (confirm)="deleteMedication()"
  (cancel)="cancelDelete()"
></app-confirm-dialog>